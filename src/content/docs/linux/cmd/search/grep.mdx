---
title: grep
description: パターンに一致する行を見つける
tags:
  - "Linux"
  - "探す・調べる"
sidebar:
  # このリンクのカスタムラベルを設定します
  label: grep
  # このリンクの順番をカスタマイズします（数字が小さいほど上に表示されます）
  order: 2
  # このリンクにバッジを追加します
  # badge:
  #     text: ""
  #     variant: tip
---

import { LinkCard, Tabs, TabItem } from "@astrojs/starlight/components";
import LinkPreview from "@components/LinkPreview.astro";
import Table from "@components/Table.astro";

## 基本

### 構文

```bash frame=none
grep [OPTIONS] PATTERN [FILE...]
grep [OPTIONS] [-e PATTERN | -f FILE] [FILE...]
```

`grep` は、指定された入力 `FILE` を検索して、指定された `PATTERN` にマッチする行を探します。
デフォルトでは `grep` は行を表示する。

:::note[FILE について]
ファイル名が指定されていない場合、または `-` がファイル名として指定されている場合は標準入力として受け付ける
:::

`egrep` は `grep -E` と同じで、 `fgrep` は `grep -F` と同じである。
`egrep` または `fgrep` として直接呼び出すことは非推奨であるが、
これらに依存する歴史的なアプリケーションをそのまま実行できるようにするために提供されている。

## OPTION

### Generic Program Information

<Table
  caption=""
  columns={["option", "long op", "description"]}
  data={[
    [
      "",
      "`--help`",
      "コマンドラインオプションの概要とバグ報告先を簡潔に要約した使用方法メッセージを表示し、終了します。",
    ],
    [
      "`-V`",
      "`--version`",
      [
        "`grep` のバージョン番号を標準出力に表示します。このバージョン番号は、すべてのバグ報告に含める必要があります（下記参照）。",
      ].join("<br/>"),
    ],
  ]}
/>

### Matcher Selection

<Table
  caption=""
  columns={["option", "long op", "description"]}
  data={[
    [
      "`-E`",
      "`--extended-regexp`",
      "`PATTERN`を拡張正規表現（ERE）として解釈します。（`-E`はPOSIXで指定されています。）",
    ],
    [
      "`-F`",
      ["`--fixed-strings`", "--fixed-regexp"].join("<br/>"),
      [
        "`PATTERN`を改行で区切られた固定文字列のリストとして解釈し、そのいずれかにマッチさせます。",
        "(`-F`はPOSIXで指定されており、`--fixed-regexp` は非推奨のエイリアスです。新しいスクリプトでは使用しないでください。)",
      ].join("<br/>"),
    ],
    ["`-G`", "`--basic-regexp`", "`PATTERN`を基本正規表現（BRE）として解釈します。これはデフォルトです。"],
    [
      "`-P`",
      "`--perl-regexp`",
      [
        "`PATTERN`を Perl 正規表現として解釈します。",
        "これは非常に実験的であり、`grep -P` は未実装の機能について警告を出す場合がある。",
      ].join("<br/>"),
    ],
  ]}
/>

### Matching Control

<Table
  caption=""
  columns={["option", "long op", "description"]}
  data={[
    [
      "`-e`",
      "`--regexp=PATTERN`",
      "`PATTERN`をパターンとして使用します。これを使用すると、複数の検索パターンを指定したり、`-`で始まるパターンを保護したりできます。(`-e` はPOSIXで指定されています。)",
    ],
    [
      "`-f`",
      "`--file=FILE`",
      "パターンを `FILE` から1行ずつ取得します。空のファイルは 0 個のパターンを含み、したがって何もマッチしません。( `-f` はPOSIXで指定されています。)",
    ],
    [
      "`-i`",
      "`--ignore-case`",
      "パターンと入力ファイルの両方で大文字小文字の区別を無視します。(`-i` はPOSIXで指定されています。)",
    ],
    [
      "`-v`",
      "`--invert-match`",
      "マッチの意味を反転させ、マッチしない行を選択します。(`-v` はPOSIXで指定されています。)",
    ],
    [
      "`-w`",
      "`--word-regexp`",
      [
        "マッチする部分が完全な単語を形成する行のみを選択します。",
        "マッチするサブストリングは行の先頭または非単語構成文字に続き、行の末尾または非単語構成文字に続く必要があります。",
        "単語構成文字は文字、数字、アンダースコアです。",
      ].join("<br/>"),
    ],
    ["`-x`", "`--line-regexp`", "行全体に完全にマッチするマッチのみを選択します。(`-x`はPOSIXで指定されています。)"],
    ["`-y`", "", "`-i` の非推奨の同義語です。"],
  ]}
/>

```bash frame=none
cat sample.txt
林檎
banana
林檎

# マッチしない行を表示
grep -v 林檎 sample.txt
banana

# 大文字と小文字を区別しないで検索を行う
grep -i Apple *.txt
sample2.txt:apple
sample2.txt:apple
sample3.txt:apple
```

### General Output Control

<Table
  caption=""
  columns={["option", "long op", "description"]}
  data={[
    [
      "`-c`",
      "`--count`",
      [
        "通常の出力を抑制し、各入力ファイルのマッチする行の数を出力します。",
        "`-v`（--invert-match）オプションと併用すると、マッチしない行の数を出力します。(`-c`はPOSIXで指定されています。)",
      ].join("<br/>"),
    ],
    [
      "",
      ["`--color[=WHEN]`", "`--colour[=WHEN]`"].join("<br/>"),
      [
        "マッチした（非空の）文字列、マッチする行、コンテキスト行、ファイル名、行番号、バイトオフセット、およびセパレータ（フィールドやコンテキスト行のグループ）をエスケープシーケンスで囲んで、ターミナル上で色付けします。",
        "色は環境変数`GREP_COLORS`で定義されます。非推奨の環境変数`GREP_COLOR`もサポートされていますが、優先順位はありません。`WHEN` は `never`、`always`、`auto`のいずれかです。",
      ].join("<br/>"),
    ],
    [
      "`-L`",
      "`--files-without-match`",
      [
        "通常の出力を抑制し、出力が通常表示されない各入力ファイルの名前を出力します。マッチの最初でスキャンを停止します。",
      ].join("<br/>"),
    ],
    [
      "`-l`",
      "`--files-with-matches`",
      "通常の出力を抑制し、出力が通常表示される各入力ファイルの名前を出力します。マッチの最初でスキャンを停止します。(`-l`はPOSIXで指定されています。)",
    ],
    [
      "`-m`",
      "`--max-count=NUM`",
      [
        "`NUM`マッチする行を超えた後にファイルの読み取りを停止します。",
        "入力が通常のファイルからの標準入力の場合、`NUM`マッチする行が出力されると、標準入力が最後のマッチ行の直後に位置するようにします。",
        "これにより、呼び出しプロセスが検索を再開できます。マッチする行数が`NUM`を超える場合、`grep` は `NUM` を超えるカウントを出力しません。",
        "`-v`（--invert-match）オプションと併用すると、`NUM` マッチしない行を出力した後に停止します。",
      ].join("<br/>"),
    ],
    [
      "`-o`",
      "`--only-matching`",
      ["マッチした（非空の）部分のみを出力し、各部分を個別の出力行にします。"].join("<br/>"),
    ],
    [
      "`-q`",
      ["`--quiet`", "`--silent`"].join("<br/>"),
      [
        "静かに実行し、標準出力に何も書き込みません。",
        "マッチが見つかった場合、エラーが検出されても即座にゼロステータスで終了します。(`-q`はPOSIXで指定されています。)",
      ].join("<br/>"),
    ],
    [
      "`-s`",
      "`--no-messages`",
      [
        "存在しないファイルや読み取り不可能なファイルに関するエラーメッセージを抑制します。",
        "ポータビリティノート: GNU grep とは異なり、7th Edition Unix grep は `-i` と `-s` オプションがありませんでした。",
        "USG スタイル grep も `-i` はなく、`-s` オプションは GNU grep の `-q` オプションのように動作しました。",
        "ポータブルなシェルスクリプトは、`-q`と`-s`の両方を避け、標準出力とエラー出力を /dev/null にリダイレクトする必要があります。(`-s`はPOSIXで指定されています。)",
      ].join("<br/>"),
    ],
  ]}
/>

```bash frame=none
# パターン (apple)と一致するファイル名を表示
grep -l apple *.txt
sample2.txt
sample3.txt
```

### Output Line Prefix Control

<Table
    caption=""
    columns={["option", "long op", "description"]}
    data={[
        [
            "`-b`",
            "`--byte-offset`",
            [
                "各出力行の前に入力ファイル内の 0 ベースのバイトオフセットを表示します。",
                "`-o`（--only-matching）オプションが指定されている場合は、マッチ部分自体のオフセットを表示します。",
            ].join("<br/>"),
        ],
        [
            "`-H`",
            "`--with-filename`",
            [
                "各マッチに対してファイル名を表示します。これは、検索するファイルが複数ある場合のデフォルト設定です。",
            ].join("<br/>"),
        ],
        [
            "`-h`",
            "`--no-filename`",
            [
                "出力にファイル名のプレフィックスを抑制します。これは、検索するファイルが1つ（または標準入力のみ）の場合のデフォルト設定です。",
            ].join("<br/>"),
        ],
        [
            "",
            "`--label=LABEL`",
            [
                "実際に標準入力から来ている入力を、`LABEL` から来ている入力として表示します。特に zgrep のようなツールを実装する際に有用です。",
                "例：`gzip -cd foo.gz`",
            ].join("<br/>"),
        ],

        [
            "`-n`",
            "`--line-number`",
            [
                "各出力行の前にその入力ファイル内での1ベースの行番号を表示します。",
                "(`-n`はPOSIXで指定されています。)",
            ].join("<br/>"),
        ],
        [
            "`-T`",
            "`--initial-tab`",
            [
                "実際の行内容の最初の文字がタブストップに位置するようにします。",
                "これにより、`-H`、`-n`、`-b` など出力にプレフィックスを追加するオプションとの整合性が保たれます。"
            ].join("<br/>"),
        ],
        [
            "`-u`",
            "`--unix-byte-offsets`",
            [
                "Unixスタイルのバイトオフセットを報告します。",
                "このスイッチは、`-b` オプションが使用されている場合にのみ効果があります。MS-DOS や MS-Windows 以外のプラットフォームでは効果がありません。",
            ].join("<br/>"),
        ],
        [
            "`-Z`",
            "`--null`",
            [
                "通常ファイル名の後に続く文字の代わりにゼロバイト（ASCII NUL文字）を出力します。",
                "例えば、`grep -lZ` は各ファイル名の後にゼロバイトを出力します。これは、新しい行や特殊文字を含むファイル名を処理する際に有用です。"
            ].join("<br/>"),
        ],
    ]}

/>

```bash frame=none
# 行番号を表示する
grep -n 林檎 sample.txt
1:林檎
3:林檎
```

### Context Line Control

<Table
    caption=""
    columns={["option", "long op", "description"]}
    data={[
        [
            "`-A`",
            "`--after-context=NUM`",
            [
                "マッチする行の後にNUM行のコンテキスト行を出力します。連続するマッチグループ間にグループセパレータ（--group-separatorで指定）が挿入されます。",
                "`-o`（--only-matching）オプションと併用すると効果がなく、警告が表示されます。",
            ].join("<br/>"),
        ],
        [
            "`-B`",
            "`--before-context=NUM`",
            [
                "マッチする行の前に`NUM`行のコンテキスト行を出力します。連続するマッチグループ間にグループセパレータ（--group-separatorで指定）が挿入されます。",
                "`-o`（--only-matching）オプションと併用すると効果がなく、警告が表示されます。",
            ].join("<br/>"),
        ],
        [
            ["`-C`", "-NUM"].join('<br/>'),
            "`--context=NUM`",
            [
                "出力コンテキストとしてNUM行を出力します。連続するマッチグループ間にグループセパレータ（--group-separatorで指定）が挿入されます。",
                "`-o`（--only-matching）オプションと併用すると効果がなく、警告が表示されます。",
            ].join("<br/>"),
        ],
        [
            "",
            "`--group-separator=SEP`",
            [
                "グループセパレータとして `SEP` を使用します。デフォルトの `SEP` は `--`です。",
            ].join("<br/>"),
        ],
        [
            "",
            "`--no-group-separator`",
            [
                "グループセパレータとして空文字列を使用します。",
            ].join("<br/>"),
        ],
    ]}

/>

### File and Directory Selection

<Table
  caption=""
  columns={["option", "long op", "description"]}
  data={[
    [
      "`-a`",
      "`--text`",
      ["バイナリファイルをテキストとして処理します。これは --binary-files=text オプションと同等です。"].join("<br/>"),
    ],
    [
      "",
      "`--binary-files=TYPE`",
      [
        "ファイルの先頭数バイトがバイナリデータを含んでいることを示す場合、`TYPE`としてファイルの種類を仮定します。",
        "デフォルトでは `TYPE` は binary であり、`grep` は通常、バイナリファイルがマッチするかどうかに応じて1行のメッセージを出力するか、マッチがない場合は何も出力しません。",
        "`TYPE` が without-match の場合、`grep` はバイナリファイルがマッチしないと仮定します。",
        "`TYPE` が text の場合、`grep` はバイナリファイルをテキストとして処理します。これは `-a` オプションと同等です。",
        "警告: `grep --binary-files=text` は、CR/LF ペアを含むテキストファイルの場合、一部の正規表現が失敗する可能性があり、ターミナルドライバが一部をコマンドとして解釈する場合、バイナリゴミを出力する可能性があります。",
      ].join("<br/>"),
    ],
    [
      "`-D`",
      "`--devices=ACTION`",
      [
        "入力ファイルがデバイス、FIFO、ソケットの場合、`ACTION` を使用して処理します。",
        "デフォルトでは `ACTION` は `read` であり、デバイスは通常のファイルとして読み取られます。`ACTION` が `skip` の場合、デバイスは静かにスキップされます。",
      ].join("<br/>"),
    ],
    [
      "`-d`",
      "`--directories=ACTION`",
      [
        "入力ファイルがディレクトリの場合、`ACTION` を使用して処理します。",
        "デフォルトでは `ACTION` は `read` であり、ディレクトリは通常のファイルとして読み取られます。",
        "`ACTION` が `skip` の場合、ディレクトリは静かにスキップされます。",
        "`ACTION` が `recurse` の場合、各ディレクトリ下のすべてのファイルを再帰的に読み取り、シンボリックリンクはコマンドラインにある場合のみ追従します。これは `-r` オプションと同等です。",
      ].join("<br/>"),
    ],
    [
      "",
      "`--exclude=GLOB`",
      [
        "ベース名が `GLOB`（ワイルドカードマッチングを使用）に一致するファイルをスキップします。",
        "ファイル名のグロブには`*`、`?`、`[...]`がワイルドカードとして使用でき、`\\`でワイルドカードやバックスラッシュ文字をリテラルにエスケープできます。",
      ].join("<br/>"),
    ],
    [
      "",
      "`--exclude-from=FILE`",
      [
        "ファイル名のグロブが含まれる `FILE` から読み取ったパターンに一致するベース名のファイルをスキップします（ワイルドカードマッチングを使用）。",
      ].join("<br/>"),
    ],
    ["", "`--exclude-dir=DIR`", ["再帰検索から `DIR` パターンに一致するディレクトリを除外します。"].join("<br/>")],
    [
      "`-I`",
      "",
      [
        "バイナリファイルをマッチしないものとして処理します。これは `--binary-files=without-match` オプションと同等です。",
      ].join("<br/>"),
    ],
    [
      "",
      "--include=GLOB",
      [
        "ベース名が `GLOB`（ワイルドカードマッチングを使用）に一致するファイルのみを検索します（`--exclude`と同様のワイルドカードマッチングを使用）。",
      ].join("<br/>"),
    ],
    [
      "`-r`",
      "--recursive",
      [
        "各ディレクトリ下のすべてのファイルを再帰的に読み取り、シンボリックリンクはコマンドラインにある場合のみ追従します。これは `-d recurse` オプションと同等です。",
      ].join("<br/>"),
    ],
    [
      "`-R`",
      "--dereference-recursive",
      [
        "各ディレクトリ下のすべてのファイルを再帰的に読み取ります。`-r` とは異なり、すべてのシンボリックリンクを追従します。",
      ].join("<br/>"),
    ],
  ]}
/>

### Other Options

<Table
  caption=""
  columns={["option", "long op", "description"]}
  data={[
    [
      "",
      "`--line-buffered`",
      ["出力に行バッファリングを使用します。これによりパフォーマンスペナルティが発生する可能性があります。"].join(
        "<br/>"
      ),
    ],
    [
      "`-U`",
      "`--binary`",
      [
        "ファイルをバイナリとして扱います。デフォルトでは、MS-DOS および MS-Windows では、ファイルの先頭 32KB を読み取ってファイルタイプを推測します。",
        "`-U` を指定すると、この推測を上書きし、すべてのファイルをそのまま読み取り、マッチングメカニズムに渡します。",
      ].join("<br/>"),
    ],
    [
      "`-z`",
      "`--null-data`",
      [
        "入力を各行がゼロバイト（ASCII NUL文字）で終了する行のセットとして扱います。",
        "これは `-Z` または `--null` オプションと同様であり、`sort -z` や `xargs -0` などのコマンドと組み合わせて任意のファイル名を処理する際に使用できます。",
      ].join("<br/>"),
    ],
  ]}
/>

## その他

> **REPORTING BUGS**

For bug reports, use the issue tracker at https://github.com/karelzak/util-linux/issues.

> **AVAILABILITY**

The fdisk command is part of the util-linux package which can be downloaded from Linux Kernel Archive
https://www.kernel.org/pub/linux/utils/util-linux/.
