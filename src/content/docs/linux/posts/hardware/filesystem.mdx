---
title: ファイルシステム
description: ファイルシステムについての説明。各パーティション上でデータを管理・整理する方法
tags:
    - "Linux"
    - "ハードウェア機器"
sidebar:
    # このリンクのカスタムラベルを設定します
    label: ファイルシステム
    # このリンクの順番をカスタマイズします（数字が小さいほど上に表示されます）
    order: 4
    # このリンクにバッジを追加します
    # badge:
    #     text: ""
    #     variant: tip
---

import { LinkCard, Tabs, TabItem, Steps, FileTree } from "@astrojs/starlight/components";
import LinkPreview from "@components/LinkPreview.astro";
import Table from "@components/Table.astro";

## ファイルシステムとは

:::note[ファイルシステムという言葉]

ファイルシステムといったとき、以下の意味で捉えられる。

-   パーティション
-   パーティション内にディレクトリをフォーマットする形式

:::

### そもそもファイルとは

コンピューターは電子計算機としてメモリー（揮発性で容量が限られる）を持ちますが、データを永続的に保存するために補助記憶装置（ディスクや SSD など）にファイルとして書き出します。
OS はファイル操作のユーザーインターフェースを提供し、昔はコマンドライン（MS-DOS）や GUI（Windows Explorer、Mac Finder）でファイルの管理を行ってきました。しかし、近年では iOS のようにファイル操作を制限する設計も登場し、アプリ中心のデータ管理が主流となっています。最近では iPadOS や iOS に「ファイル」アプリが追加され、ファイル操作が再び可能になっています。

## ファイルシステムとその進化についての解説

Windows ではディスクの初期化やフォーマット時に主に NTFS と FAT の 2 種類のファイルシステムを選択できます。

### NTFS（New Technology File System）

Windows NT の開発段階で設計された先進的なファイルシステム。
ジャーナリング機能を持ち、データの整合性を保つ。
厳格なアクセス制御や高度な機能を提供。

### FAT（File Allocation Table）

マイクロソフトが昔から使用しているファイルシステム。

種類には FAT16、FAT32、exFAT などがあり、それぞれ最大容量やファイルサイズの制限が異なる。

-   **FAT16**: 最大 2GB のボリューム、1 ファイルあたり最大 2GB。
-   **FAT32**: 最大 2TB のボリューム、1 ファイルあたり最大 4GB。
-   **exFAT**: より大容量対応。実質 FAT64

### SD カードとファイルシステムの関係

#### SD カードの進化

初期の SD カードは FAT16 でフォーマットされていたが、写真や動画の容量増加に伴い
SDHC は FAT32、SCXC は exFAT などに拡張。
規格には SDHC（最大 32GB）、SDXC（最大 2TB）、SDUC などが存在。

#### フラッシュメモリー（USB メモリなど）

多くが FAT 形式で初期化されており、MacOS や Linux でも互換性が高い。
NTFS は互換性が低いため、主に FAT が使用される。

### ファイルシステムの制限と規格の変化

ファイルシステムの容量やファイルサイズの制限により、記憶媒体の規格や機能が変化。

例えば、高画質動画の保存には従来の FAT では容量不足となり、より大容量に対応する exFAT へ移行。

ファイルシステムはコンピューターや各種デバイスのデータ管理において重要な役割を果たしており、技術の進化に伴いその種類や機能も進化しています。特に FAT と NTFS の違いや、それに伴うデバイスのフォーマット選択がユーザーの操作性やデータの保存方法に大きく影響しています。

### ext, ext2, ext3, ext4 ファイルシステムの特徴

<Table
    caption=""
    columns={[
        ["ファイル", "システム"].join("<br/>"),
        ["リリース", "時期"].join("<br/>"),
        ["カーネル", "バージョン"].join("<br/>"),
        ["最大", "ファイル", "サイズ"].join("<br/>"),
        ["最大", "ファイル", "システム", "サイズ"].join("<br/>"),
        "説明",
    ]}
    data={[
        [
            "ext",
            ["1992年", "4月"].join("<br/>"),
            "0.96",
            "2GB",
            "2GB",
            [
                "Minix ファイルシステムを拡張した Linux 初期のファイルシステムである。",
                "2.1.21 以降のカーネルではサポートされていない",
            ].join("<br/>"),
        ],
        [
            "ext2",
            ["1993年", "1月"].join("<br/>"),
            "0.99",
            "2TB",
            "32TB",
            [
                "ext からの拡張",
                "・ 可変ブロックサイズ",
                "・ 3 種類のタイムスタンプ(ctime/mtime/atime)",
                "・ ビットマップによるブロックと i ノードの管理",
                "・ ブロックグループの導入",
            ].join("<br/>"),
        ],
        [
            "ext3",
            ["2001年", "11月"].join("<br/>"),
            "2.4.15",
            "2TB",
            "32TB",
            ["ext2 にジャーナル機能を追加。ext2と後方互換性がある"].join("<br/>"),
        ],
        [
            "ext4",
            ["2008年", "12月"].join("<br/>"),
            "2.6.28",
            "16TB",
            "1EB",
            [
                "ext2/ext3 からの拡張",
                "・ extent の採用によるパフォーマンスの改良",
                "・ ナノ秒単位のタイムスタンプ",
                "・ デフラグ機能",
                "ext2/ext3 と後方互換性がある",
            ].join("<br/>"),
        ],
    ]}
/>

### その他のファイルシステム

<Table
    caption=""
    columns={["主なファイルシステム", "説明"]}
    data={[
        [
            "reiserfs",
            [
                "ジャーナル機能を持ったファイルシステム。ディスクの使用効率がよく、クラッシュからの高速な回復機能がある。",
                "i ノードの動的な割り当てをサポート",
            ].join("<br>"),
        ],
        [
            "xfs",
            [
                "ジャーナル機能を持ったファイルシステム。SGI が開発。巨大なファイルを容易に扱える。",
                "i ノードの動的な割り当てをサポート",
            ].join("<br>"),
        ],
        [
            "jfs",
            [
                "ジャーナル機能を持ったファイルシステム。IBM が開発。巨大なファイルを容易に扱える。",
                "i ノードの動的な割り当てをサポート",
            ].join("<br>"),
        ],
        ["vfat", ["Windows と Linux の両方で読み書き可能なファイルシステム"].join("<br>")],
        ["exfat", ["vfat の拡張。最大ファイルサイズ(16EiB) 対応"].join("<br>")],
        [
            "btrfs",
            [
                "ファイルシステムのツリー構造に B-Tree を採用し、データ領域の割り当てにエクステントを採用している。",
                "複数のディスクパーティションから 1 つのファイルシステムを構成でき、ファイルシステムのスナップショット機能がある。",
            ].join("<br>"),
        ],
    ]}
/>

## ファイルシステムの作成

### fdisk コマンド

パーティションにファイルシステムを作成すると、ディレクトリ階層構造が作られデータをファイルとして保存することが可能となる。

### ファイルシステムの形式
