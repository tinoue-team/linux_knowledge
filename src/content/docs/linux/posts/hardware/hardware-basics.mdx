---
title: ハードウェアの基礎
description: ハードウェアの基礎知識と設定の説明
tags:
    - "Linux"
    - "ハードウェア機器"
sidebar:
    # このリンクのカスタムラベルを設定します
    label: ハードウェアの基礎
    # このリンクの順番をカスタマイズします（数字が小さいほど上に表示されます）
    order: 1
    # このリンクにバッジを追加します
    # badge:
    #     text: ""
    #     variant: tip
---

import { LinkCard, Tabs, TabItem, Steps, FileTree } from "@astrojs/starlight/components";
import LinkPreview from "@components/LinkPreview.astro";
import MermaidChart from "@components/MermaidChart.astro";
import Table from "@components/Table.astro";

## 基本的なシステムハードウェア

### CPU

コンピュータの頭脳ともいえる、演算処理を行う部分。メモリ上からプロブラムを呼び出し、処理を実行する役割を持つ。
CPU にはさまざまな種類があるが、Linux は非常に多くの CPU の種類があります。Linux は非常に多くの CPU の種類(アーキテクチャ)に対応しています。  
GHz(ギガヘルツ)で表される動作周波数は、性能の指標の一つ。

![CPU](@assets/linux/posts/hardware/AdobeStock_81247213_Preview.webp)

:::note[アーキテクチャ]

コンピュータハードウェアの基本設計を意味しますが、CPU の種別を表す言葉としてよく使われます。
Intel 系 CPU を表す "x86"、 "IA-32"、x86 アーキテクチャを 64 ビットに拡張した "x86-64"、
組み込み機器に多く使われる "ARM" などがある。

:::

### メモリ

データを記憶する役割を持つ。メモリ、メインメモリ、主記憶など呼ばれる。  
メモリに記憶された内容は、システムの電源が切れると消えてしまいます。
Linux が動作するには、512 MB ~ 1 GB 程度以上のメモリが必要。
(128 MB のメモリで動作するような Linux ディストリビューションもありますが、サーバーとして利用するには最低 1 GB 程度は必要)

![メモリ](@assets/linux/posts/hardware/AdobeStock_516128448_Preview.webp)

### ストレージ(ディスクストレージ)

![ストレージ](@assets/linux/posts/hardware/AdobeStock_405101877_Preview.webp)

メモリは容量もそれほど大きくはなく、電源を切ると内容は消失してしまうので、大きなサイズのデータや長期間保存するデータは
ストレージ(記憶装置)に格納します。ストレージには、磁気ディスクに記憶するハードディスク(HDD: Hard Disk Drive)や、
フラッシュメモリに記憶する SSD (Solid State Drive) などがある。システムに内蔵するタイプのものと、外付けで接続する形態のものがある。

ストレージの接続形態にはいくつかの規格がある。サーバーや PC で主に利用されている規格は以下

{/* ハードディスクには、SCSI、SATA、IDE/ATA (PATA)、USB などいくつかの規格がある。 */}

<Table
    caption="ストレージの接続規格"
    columns={["規格", "説明"]}
    data={[
        [
            "SATA(Serial ATA)",
            [
                "現在主流となっている規格。",
                "かつて広く使われていた IDE に比べてデータ転送速度が速く、ほどんどの PC で標準的に搭載されている。",
            ].join("<br>"),
        ],
        [
            "SAS(Serial Attached SCSI)",
            ["SATA よりも高速で信頼性も高い。", "主にサーバー用途で使われるが、SATA と比べて高価"].join("<br>"),
        ],
        [
            "SCSI",
            [
                "ハードディスクや DVD ドライブ、テープドライブなど、さまざまな周辺機器を接続するための一般的な企画だが、現在はあまり使用されていない。",
                "SCSI デバイスを使うには、SCSI ホストアダプタ(SCSIカード)が必要",
            ].join("<br>"),
        ],
        ["USB(Universal Serial Bus)", ["周辺機器を接続する規格として広く普及している"].join("<br>")],
    ]}
/>

ディスクとは、データを記録し、保存するための記憶装置の一種です。コンピュータシステムでは、主に以下の 2 つのタイプのディスクが使用されます。

#### 1. ハードディスクドライブ (HDD)

-   **構造**: 金属製のディスク（プラッタ）を高速で回転させ、磁気ヘッドでデータを読み書きします。
-   **特徴**:
    -   大容量のデータを比較的安価に保存できます。
    -   機械的な動作部分があるため、物理的な衝撃に弱い。
    -   書き込みや読み出しの速度が SSD よりも遅い場合があります。
-   **用途**: 大量のデータ保存、バックアップ、アーカイブなど。

#### 2. ソリッドステートドライブ (SSD)

-   **構造**: フラッシュメモリチップを使用してデータを記録します。機械的な動作部分はありません。
-   **特徴**:
    -   高速なデータ読み書きが可能です。
    -   衝撃に強く、耐久性が高い。
    -   容量あたりの価格は HDD よりも高い。
-   **用途**: 高速なデータアクセスが求められるシステムドライブ、アプリケーションのインストール先など。

#### ディスクの役割

ディスクは、コンピュータシステムにおいて次のような役割を果たします。

-   **データ保存**: オペレーティングシステム、アプリケーション、ユーザーデータを保存します。
-   **データの永続化**: 電源を切ってもデータが保持されるため、長期的なデータ保存が可能です。
-   **アクセスの効率化**: データを効率的に読み書きするための技術（キャッシュ、RAID 構成など）を使用します。

#### 主な使用例

-   **パソコンやサーバーのストレージ**:
    オペレーティングシステムやアプリケーションのインストール、データファイルの保存。
-   **外部ストレージ**:
    外付け HDD や SSD を使用して、データのバックアップや持ち運び可能なストレージとして使用。
-   **データセンター**:
    大規模なデータ保存や処理のためのストレージインフラとして使用。

ディスクは、データを安全に、効率的に保存するために不可欠なコンポーネントです。用途に応じて HDD と SSD を使い分けることが一般的です。

### 入力装置

キーボードとマウスは、コンピュータに情報を入力するための基本的なハードウェアです。
サーバーでは接続されていないこともある。

![キーボード・マウス](@assets/linux/posts/hardware/AdobeStock_888538575_Preview.webp)

### 拡張カード

マザーボードの拡張スロットに装着する形で様々な機能を提供するハードウェア部品。ネットワークカード(NIC)、ビデオカード、
SCSI カード、RAID カードなどがあります。
拡張カードを取り付けたり取り外したりするときは一般的にシステムの電源を切っておく必要があります。(コールドプラグ)

![wikipedia NIC](https://upload.wikimedia.org/wikipedia/commons/9/9e/Network_card.jpg)

### ホットプラグ(USB 機器など)

さまざまな周辺機器を接続する規格で USB があります。キーボード、マウス、ハードディスク、SSD、USB メモリ、DVD ドライブなど、
多彩な周辺機器が対応しています。USB 機器は、システムの電源をオンにしたまま、接続したり取り外したりする(ホットプラグ)ことができます。

#### コールドプラグデバイス と ホットプラグデバイス

##### コールドプラグデバイス

システムが停止している状態でのみデバイスの差し替えができるデバイスのことです。システムは起動時にデバイスを認識します。
コールドプラグデバイスにはネットワークカード(NIC)などがあります。

##### ホットプラグデバイス

システムが起動している状態でもデバイスの差し替えができるデバイスのことです。これらはプラグアンドプレイデバイスとも呼ばれます。ホットプラグデバイスには USB や PC カード(PCMCIA)、IEEE1394 などがあります。

### フラッシュ ROM

ROM(Read Only Memory) は読み出し専用のメモリですが、フラッシュ ROM は書き換えることが可能な ROM です。

### デバイス

コンピュータを構成するハードウェア部品のこと。プリンタやディスプレイなどの周辺機器だけではなく、
CPU やハードディスクといったパーツも個々のデバイスです。

### マザーボード

CPU やメモリ、各種インターフェースなど、コンピュータを構成する基本的なパーツを搭載する基板のこと

## BIOS/UEFI

### BIOS (Basic Input Output System: 入出力基本システム)

キーボードやハードディスクなどのデバイスを制御する、もっとも基本的な制御プログラム。
BIOS はコンピュータのマザーボードや拡張カードに搭載されたフラッシュ ROM に書き込まれている。
OS やアプリケーションは、BIOS のインターフェースを利用して簡単にハードウェアへアクセスすることができる。

-   **システム BIOS**: マザーボード上の BIOS
-   **拡張 BIOS**: 拡張カード上の BIOS

:::note[BIOS の役割]

-   OS を起動するためのプログラムをディスクから読み込んで実行する
-   デバイスの動作を設定する
-   基本的な入出力を制御する

:::

:::caution

コンピュータに搭載されている BIOS が古いと大容量のハードディスクが正常に認識できないなど、不具合が生じる可能性があります。
メーカーが最新版の BIOS を公開している場合は、適切な順序でアップデートすることで、そのような不具合が解消できることがある。

:::

### UEFI (Unified Extensible Firmware Interface)

BIOS の後継となるファームウェア規格。
UEFI では、一部 OS における起動ドライブの容量制限(BIOS では 2TB)がなくなったり、GUI ベースのセットアップ画面を利用できるなど、様々な拡張が行われている。
旧来の BIOS と、UEFI をあわせ、コンピュータのファームウェアの総称として「BIOS」という言葉が使われる場合もある。

### ブートプロセス

電源を入れてから、システムが起動するまでの処理の流れを、boot または bootstrap という。

BIOS の理解をするためには BIOS がどのように使われるのかを知る必要があります。
システムの電源を入れてから OS が起動するまでの流れは、コンピュータのアーキテクチャによって異なるが、一般的な PC (x86/x86-64 アーキテクチャ)の起動順序が以下

<MermaidChart chart={`

    stateDiagram-v2
    direction LR
        [*] --> BIOS/UEFI: 電源ON
        BIOS/UEFI --> ブートローダ: ハードウェア初期化<br>ブートローダ読み出し
        ブートローダ --> カーネル: カーネルを<br>メモリ上に読み込む
        カーネル --> init/systemd

`}/>

<Steps>

1. **電源を入れると、最初に BIOS/UEFI が起動する**

    コンピュータの電源を入れると、システム BIOS/UEFI のメッセージが表示される。

    1. 接続されたデバイスやメモリチェック(POST: Power On Self Test)
    1. セットアップ画面を呼び出し以下の項目を設定

        - 日付や時刻(ハードウェアクロック)
        - ディスクドライブや各種デバイスのパラメータ
        - キーボードの使用/不使用
        - 電源管理
        - 起動ドライブの順序
        - デバイスへの IRQ (Interrupt Request: 割り込み要求)の割り当て
        - 各種デバイスの使用/不使用

1. **BIOS/UEFI はハードウェアの初期化を行い、起動デバイス(HDD や SSD)に書き込まれたブートローダを読み出し、ブートローダに制御を移す**

1. **ブートローダが起動デバイス上から、カーネルをメモリ上に読み込む**

1. **カーネルが、メモリの初期化、システムクロックの設定などを行い、仮のルートファイルシステムをマウントする**

1. **カーネルはルートファイルシステムから、init プロセス(または systemd)を実行する**

    init および systemd は必要なサービスなどを順次起動していき、最後にログインプロンプトを表示して起動処理を完了する。

</Steps>

コンピュータの電源を入れると、システム BIOS/UEFI のメッセージが表示される。この時点でコンピュータは
